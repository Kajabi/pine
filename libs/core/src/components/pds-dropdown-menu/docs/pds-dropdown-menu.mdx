import { Meta, Canvas, Controls } from '@storybook/addon-docs/blocks';
import * as stories from '../stories/pds-dropdown-menu.stories.js';

import { DocArgsTable, DocCanvas } from '@pine-ds/doc-components';
import { components } from '../../../../dist/docs.json';

<Meta of={stories} />

# Dropdown Menu


## Guidelines

### When to use

- To display a list of options that can be interacted with by the user.
- Ideal for situations where users need to interact with a predefined set of options.
- When you need to conserve space by hiding options until they're needed.

### When not to use

- When you need a multi-select interface (consider using checkboxes instead)
- When you have very few options that could fit directly in the UI without a dropdown

### Accessibility

- Implements the WAI-ARIA Menu Button Pattern for screen reader compatibility
- Supports full keyboard navigation with arrow keys, Enter, Space, Home, and End
- Traps focus within the dropdown when open
- Provides high-contrast focus indicators for all interactive elements


### Keyboard Interactions
<pds-box border border-radius="sm" fit>
  <pds-table component-id="keyboard-shortcuts" >
    <pds-table-head>
      <pds-table-head-cell>Key</pds-table-head-cell>
      <pds-table-head-cell>Action</pds-table-head-cell>
    </pds-table-head>
    <pds-table-body>
      <pds-table-row>
        <pds-table-cell>Enter / Space (on trigger)</pds-table-cell>
        <pds-table-cell>Opens the dropdown menu</pds-table-cell>
      </pds-table-row>
      <pds-table-row>
        <pds-table-cell>Escape</pds-table-cell>
        <pds-table-cell>Closes the dropdown menu</pds-table-cell>
      </pds-table-row>
      <pds-table-row>
        <pds-table-cell>Tab</pds-table-cell>
        <pds-table-cell>Moves focus to the next focusable element</pds-table-cell>
      </pds-table-row>
      <pds-table-row>
        <pds-table-cell>Arrow Down</pds-table-cell>
        <pds-table-cell>Moves focus to the next menu item</pds-table-cell>
      </pds-table-row>
      <pds-table-row>
        <pds-table-cell>Arrow Up</pds-table-cell>
        <pds-table-cell>Moves focus to the previous menu item</pds-table-cell>
      </pds-table-row>
      <pds-table-row>
        <pds-table-cell>Home</pds-table-cell>
        <pds-table-cell>Moves focus to the first menu item</pds-table-cell>
      </pds-table-row>
      <pds-table-row>
        <pds-table-cell>End</pds-table-cell>
        <pds-table-cell>Moves focus to the last menu item</pds-table-cell>
      </pds-table-row>
      <pds-table-row>
        <pds-table-cell>Enter / Space (on menu item)</pds-table-cell>
        <pds-table-cell>Activates the item</pds-table-cell>
      </pds-table-row>
    </pds-table-body>
  </pds-table>
</pds-box>
## Properties

<DocArgsTable componentName="pds-dropdown-menu" docSource={components} />

### Dropdown Menu Item

<DocArgsTable componentName="pds-dropdown-menu-item" docSource={components} />

## Examples

### Default

The default dropdown menu displays a list of options that can be selected by the user.

<DocCanvas
  mdxSource={{
    react: `
<PdsDropdownMenu>
  <PdsButton slot="trigger">Trigger</PdsButton>
  <PdsDropdownItem>Item 1</PdsDropdownItem>
  <PdsDropdownItem>Item 2</PdsDropdownItem>
  <PdsDropdownItem>Item 3</PdsDropdownItem>
</PdsDropdownMenu>
`,
    webComponent:`
<pds-dropdown-menu>
  <pds-button slot="trigger">Trigger</pds-button>
  <pds-dropdown-item>Item 1</pds-dropdown-item>
  <pds-dropdown-item>Item 2</pds-dropdown-item>
  <pds-dropdown-item>Item 3</pds-dropdown-item>
</pds-dropdown-menu>
`
  }}
>
<div style={{ height: '200px', width: '100%', textAlign: 'center'}}>
  <pds-dropdown-menu>
    <pds-button slot="trigger">Trigger</pds-button>
    <pds-dropdown-menu-item>Item 1</pds-dropdown-menu-item>
    <pds-dropdown-menu-item>Item 2</pds-dropdown-menu-item>
    <pds-dropdown-menu-item>Item 3</pds-dropdown-menu-item>
  </pds-dropdown-menu>
</div>
</DocCanvas>

### With Separator

The dropdown menu can also display a separator between items.

<DocCanvas
  mdxSource={{
    react: `
<PdsDropdownMenu>
  <PdsButton slot="trigger">Trigger</PdsButton>
  <PdsDropdownMenuItem>Item 1</PdsDropdownMenuItem>
  <PdsDropdownMenuSeparator />
  <PdsDropdownMenuItem>Item 2</PdsDropdownMenuItem>
  <PdsDropdownMenuSeparator />
  <PdsDropdownMenuItem>Item 3</PdsDropdownMenuItem>
</PdsDropdownMenu>
`,
    webComponent:`
<pds-dropdown-menu>
  <pds-button slot="trigger">Trigger</pds-button>
  <pds-dropdown-menu-item>Item 1</pds-dropdown-menu-item>
  <pds-dropdown-menu-separator />
  <pds-dropdown-menu-item>Item 2</pds-dropdown-menu-item>
  <pds-dropdown-menu-separator />
  <pds-dropdown-menu-item>Item 3</pds-dropdown-menu-item>
</pds-dropdown-menu>
`
  }}
>
<div style={{ height: '200px', width: '100%', textAlign: 'center' }}>
  <pds-dropdown-menu>
    <pds-button slot="trigger">Trigger</pds-button>
    <pds-dropdown-menu-item>Item 1</pds-dropdown-menu-item>
    <pds-dropdown-menu-separator />
    <pds-dropdown-menu-item>Item 2</pds-dropdown-menu-item>
    <pds-dropdown-menu-separator />
    <pds-dropdown-menu-item>Item 3</pds-dropdown-menu-item>
  </pds-dropdown-menu>
</div>
</DocCanvas>

### With Icons

Menu items can display icons before the text by including a `pds-icon` component within the item.

<DocCanvas
  mdxSource={{
    react: `
<PdsDropdownMenu>
  <PdsButton slot="trigger">Actions</PdsButton>
  <PdsDropdownMenuItem>
    <PdsIcon name="edit" /> Edit
  </PdsDropdownMenuItem>
  <PdsDropdownMenuItem>
    <PdsIcon name="copy" /> Duplicate
  </PdsDropdownMenuItem>
  <PdsDropdownMenuItem>
    <PdsIcon name="download" /> Download
  </PdsDropdownMenuItem>
  <PdsDropdownMenuSeparator />
  <PdsDropdownMenuItem destructive>
    <PdsIcon name="trash" /> Delete
  </PdsDropdownMenuItem>
</PdsDropdownMenu>
`,
    webComponent:`
<pds-dropdown-menu>
  <pds-button slot="trigger">Actions</pds-button>
  <pds-dropdown-menu-item>
    <pds-icon name="edit"></pds-icon> Edit
  </pds-dropdown-menu-item>
  <pds-dropdown-menu-item>
    <pds-icon name="copy"></pds-icon> Duplicate
  </pds-dropdown-menu-item>
  <pds-dropdown-menu-item>
    <pds-icon name="download"></pds-icon> Download
  </pds-dropdown-menu-item>
  <pds-dropdown-menu-separator />
  <pds-dropdown-menu-item destructive>
    <pds-icon name="trash"></pds-icon> Delete
  </pds-dropdown-menu-item>
</pds-dropdown-menu>
`
  }}
>
<div style={{ height: '250px', width: '100%', textAlign: 'center' }}>
  <pds-dropdown-menu>
    <pds-button slot="trigger">Actions</pds-button>
    <pds-dropdown-menu-item><pds-icon name="pen"></pds-icon> Edit</pds-dropdown-menu-item>
    <pds-dropdown-menu-item><pds-icon name="copy"></pds-icon> Duplicate</pds-dropdown-menu-item>
    <pds-dropdown-menu-item><pds-icon name="download"></pds-icon> Download</pds-dropdown-menu-item>
    <pds-dropdown-menu-separator />
    <pds-dropdown-menu-item destructive><pds-icon name="trash"></pds-icon> Delete</pds-dropdown-menu-item>
  </pds-dropdown-menu>
</div>
</DocCanvas>

### With Links

Menu items can function as links by using the href attribute.

<DocCanvas
  mdxSource={{
    react: `
<PdsDropdownMenu>
  <PdsButton slot="trigger">Navigation</PdsButton>
  <PdsDropdownMenuItem href="/dashboard">Dashboard</PdsDropdownMenuItem>
  <PdsDropdownMenuItem href="/profile">Profile</PdsDropdownMenuItem>
  <PdsDropdownMenuItem href="/settings">Settings</PdsDropdownMenuItem>
</PdsDropdownMenu>
`,
    webComponent:`
<pds-dropdown-menu>
  <pds-button slot="trigger">Navigation</pds-button>
  <pds-dropdown-menu-item href="/dashboard">Dashboard</pds-dropdown-menu-item>
  <pds-dropdown-menu-item href="/profile">Profile</pds-dropdown-menu-item>
  <pds-dropdown-menu-item href="/settings">Settings</pds-dropdown-menu-item>
</pds-dropdown-menu>
`
  }}
>
<div style={{ height: '200px', width: '100%', textAlign: 'center' }}>
  <pds-dropdown-menu>
    <pds-button slot="trigger">Navigation</pds-button><pds-dropdown-menu-item href="/dashboard">Dashboard</pds-dropdown-menu-item><pds-dropdown-menu-item href="/profile">Profile</pds-dropdown-menu-item>
    <pds-dropdown-menu-item href="/settings">Settings</pds-dropdown-menu-item>
  </pds-dropdown-menu>
</div>
</DocCanvas>

### With External Links

Menu items can open links in a new tab using the `external` boolean prop. This displays an external icon and opens the link in a new tab.

<DocCanvas
  mdxSource={{
    react: `
<PdsDropdownMenu>
  <PdsButton slot="trigger">Resources</PdsButton>
  <PdsDropdownMenuItem href="https://example.com/docs" external>Documentation</PdsDropdownMenuItem>
  <PdsDropdownMenuItem href="https://example.com/support" external>Support</PdsDropdownMenuItem>
  <PdsDropdownMenuSeparator />
  <PdsDropdownMenuItem href="/settings">Settings</PdsDropdownMenuItem>
</PdsDropdownMenu>
`,
    webComponent:`
<pds-dropdown-menu>
  <pds-button slot="trigger">Resources</pds-button>
  <pds-dropdown-menu-item href="https://example.com/docs" external>Documentation</pds-dropdown-menu-item>
  <pds-dropdown-menu-item href="https://example.com/support" external>Support</pds-dropdown-menu-item>
  <pds-dropdown-menu-separator />
  <pds-dropdown-menu-item href="/settings">Settings</pds-dropdown-menu-item>
</pds-dropdown-menu>
`
  }}
>
<div style={{ height: '200px', width: '100%', textAlign: 'center' }}>
  <pds-dropdown-menu>
    <pds-button slot="trigger">Resources</pds-button>
    <pds-dropdown-menu-item href="https://example.com/docs" external>Documentation</pds-dropdown-menu-item>
    <pds-dropdown-menu-item href="https://example.com/support" external>Support</pds-dropdown-menu-item>
    <pds-dropdown-menu-separator />
    <pds-dropdown-menu-item href="/settings">Settings</pds-dropdown-menu-item>
  </pds-dropdown-menu>
</div>
</DocCanvas>

>**Note:** You can also use the `target` prop for more control (e.g., `target="_blank"`, `target="_parent"`). The `target` prop takes precedence over `external` if both are set.

### Mixing Menu Items with Raw Elements

In most cases, use `pds-dropdown-menu-item` for menu options. However, for edge cases requiring native browser or framework behavior (such as handling non-GET HTTP methods or framework-specific data attributes), you can mix in raw `<a>` or `<button>` elements. These elements are included in keyboard navigation but require additional CSS in your application for hover and focus states (see example below).

The example below demonstrates mixing a standard menu item with raw `<a>` and `<button>` elements that use framework-specific data attributes.

<DocCanvas
  mdxSource={{
    react:`
{/* Hover/focus styles for raw elements (add to your app's CSS) */}
<style>{\`
  pds-dropdown-menu > a:hover,
  pds-dropdown-menu > button:hover {
    background-color: var(--pine-color-background-muted);
  }
  pds-dropdown-menu > a:focus,
  pds-dropdown-menu > button:focus {
    outline: var(--pine-outline-focus);
    outline-offset: var(--pine-border-width);
  }
  pds-dropdown-menu > a.destructive:hover {
    background-color: var(--pine-color-danger-disabled);
  }
  pds-dropdown-menu > a.destructive:focus {
    outline: var(--pine-outline-focus-danger);
  }
\`}</style>

<PdsDropdownMenu>
  <PdsButton slot="trigger">Actions</PdsButton>
  <PdsDropdownMenuItem href="/view">View</PdsDropdownMenuItem>
  <PdsDropdownMenuSeparator />
  <a href="/edit" data-remote="true">Edit</a>
  <a href="/archive" data-method="post">Archive</a>
  <PdsDropdownMenuSeparator />
  <button type="button" data-action="modal#open">Open Modal</button>
  <a href="/delete" data-method="delete" className="destructive">Delete</a>
</PdsDropdownMenu>
`,
    webComponent:`
<!-- Hover/focus styles for raw elements (add to your app's CSS) -->
<style>
  pds-dropdown-menu > a:hover,
  pds-dropdown-menu > button:hover {
    background-color: var(--pine-color-background-muted);
  }
  pds-dropdown-menu > a:focus,
  pds-dropdown-menu > button:focus {
    outline: var(--pine-outline-focus);
    outline-offset: var(--pine-border-width);
  }
  pds-dropdown-menu > a.destructive:hover {
    background-color: var(--pine-color-danger-disabled);
  }
  pds-dropdown-menu > a.destructive:focus {
    outline: var(--pine-outline-focus-danger);
  }
</style>

<pds-dropdown-menu>
  <pds-button slot="trigger">Actions</pds-button>
  <pds-dropdown-menu-item href="/view">View</pds-dropdown-menu-item>
  <pds-dropdown-menu-separator />
  <a href="/edit" data-remote="true">Edit</a>
  <a href="/archive" data-method="post">Archive</a>
  <pds-dropdown-menu-separator />
  <button type="button" data-action="modal#open">Open Modal</button>
  <a href="/delete" data-method="delete" class="destructive">Delete</a>
</pds-dropdown-menu>
`
  }}
>
<style>
{`
  .raw-elements-example pds-dropdown-menu > a:hover,
  .raw-elements-example pds-dropdown-menu > button:hover {
    background-color: var(--pine-color-background-muted);
  }
  .raw-elements-example pds-dropdown-menu > a:focus,
  .raw-elements-example pds-dropdown-menu > button:focus {
    outline: var(--pine-outline-focus);
    outline-offset: var(--pine-border-width);
  }
  .raw-elements-example pds-dropdown-menu > a.destructive:hover {
    background-color: var(--pine-color-danger-disabled);
  }
  .raw-elements-example pds-dropdown-menu > a.destructive:focus {
    outline: var(--pine-outline-focus-danger);
  }
`}
</style>
<div className="raw-elements-example" style={{ height: '275px', width: '100%', textAlign: 'center' }}>
  <pds-dropdown-menu>
    <pds-button slot="trigger">Actions</pds-button>
    <pds-dropdown-menu-item href="/view">View</pds-dropdown-menu-item>
    <pds-dropdown-menu-separator></pds-dropdown-menu-separator>
    <a href="/edit" data-remote="true">Edit</a>
    <a href="/archive" data-method="post">Archive</a>
    <pds-dropdown-menu-separator></pds-dropdown-menu-separator>
    <button type="button" data-action="modal#open">Open Modal</button>
    <a href="/delete" data-method="delete" className="destructive">Delete</a>
  </pds-dropdown-menu>
</div>
</DocCanvas>

**Raw element attributes:**
- Add `class="destructive"` for danger/destructive text color
- Add `aria-disabled="true"` to visually disable an anchor element
- Add `disabled` attribute to visually disable a button element

>**Note:** Use `pds-dropdown-menu-item` for most cases. Raw elements should only be used when you need native browser behavior that cannot work through the component's Shadow DOM (e.g., framework-specific data attributes for form submissions). Due to Shadow DOM limitations, hover and focus states for raw elements must be styled by the consuming application's CSS.

### With Disabled Items

Menu items can be disabled using the disabled attribute.

<DocCanvas
  mdxSource={{
    react: `
<PdsDropdownMenu>
  <PdsButton slot="trigger">Navigation</PdsButton>
  <PdsDropdownMenuItem disabled>Item 1</PdsDropdownMenuItem>
  <PdsDropdownMenuItem>Item 2</PdsDropdownMenuItem>
  <PdsDropdownMenuItem>Item 3</PdsDropdownMenuItem>
</PdsDropdownMenu>
`,
    webComponent: `
<pds-dropdown-menu>
  <pds-button slot="trigger">Navigation</pds-button>
  <pds-dropdown-menu-item disabled>Item 1</pds-dropdown-menu-item>
  <pds-dropdown-menu-item>Item 2</pds-dropdown-menu-item>
  <pds-dropdown-menu-item>Item 3</pds-dropdown-menu-item>
</pds-dropdown-menu>
`
  }}
>
<div style={{ height: '200px', width: '100%', textAlign: 'center' }}>
  <pds-dropdown-menu>
    <pds-button slot="trigger">Navigation</pds-button>
    <pds-dropdown-menu-item disabled>Item 1</pds-dropdown-menu-item>
    <pds-dropdown-menu-item>Item 2</pds-dropdown-menu-item>
    <pds-dropdown-menu-item>Item 3</pds-dropdown-menu-item>
  </pds-dropdown-menu>
</div>
</DocCanvas>

### With Custom Placement

The dropdown menu can be positioned relative to the trigger using the placement property.

<DocCanvas
  mdxSource={{
    react: `
<PdsDropdownMenu placement="bottom-end">
  <PdsChip slot="trigger" sentiment="success" variant="dropdown">Trigger/PdsChip>
  <PdsDropdownMenuItem>Item 1</PdsDropdownMenuItem>
  <PdsDropdownMenuItem>Item 2</PdsDropdownMenuItem>
</PdsDropdownMenu>
`,
    webComponent: `
<pds-dropdown-menu placement="bottom-end">
  <pds-chip slot="trigger" sentiment="success" variant="dropdown">Trigger</pds-chip>
  <pds-dropdown-menu-item>Item 1</pds-dropdown-menu-item>
  <pds-dropdown-menu-item>Item 2</pds-dropdown-menu-item>
</pds-dropdown-menu>
`
  }}
>
<div style={{ height: '200px', width: '100%', textAlign: 'center' }}>
  <pds-dropdown-menu placement="bottom-end">
   <pds-chip slot="trigger" sentiment="success" variant="dropdown">Trigger</pds-chip>
   <pds-dropdown-menu-item>Item 1</pds-dropdown-menu-item>
   <pds-dropdown-menu-item>Item 2</pds-dropdown-menu-item>
  </pds-dropdown-menu>
</div>
</DocCanvas>

### Scrollable Menu

The `menu-panel` CSS part can be used to customize the menu container's dimensions and enable scrolling for long lists as needed.

<DocCanvas
  mdxSource={{
    react: `
<style>
{\`
  .scrollable-menu::part(menu-panel) {
    max-height: 200px;
    overflow-y: auto;
    min-width: 250px;
  }
\`}
</style>
<PdsDropdownMenu className="scrollable-menu">
  <PdsButton slot="trigger">Options</PdsButton>
  <PdsDropdownMenuItem>Item 1</PdsDropdownMenuItem>
  <PdsDropdownMenuItem>Item 2</PdsDropdownMenuItem>
  <PdsDropdownMenuItem>Item 3</PdsDropdownMenuItem>
  <PdsDropdownMenuItem>Item 4</PdsDropdownMenuItem>
  <PdsDropdownMenuItem>Item 5</PdsDropdownMenuItem>
  <PdsDropdownMenuItem>Item 6</PdsDropdownMenuItem>
  <PdsDropdownMenuItem>Item 7</PdsDropdownMenuItem>
  <PdsDropdownMenuItem>Item 8</PdsDropdownMenuItem>
  <PdsDropdownMenuItem>Item 9</PdsDropdownMenuItem>
  <PdsDropdownMenuItem>Item 10</PdsDropdownMenuItem>
</PdsDropdownMenu>
`,
    webComponent:`
<style>
  .scrollable-menu::part(menu-panel) {
    max-height: 200px;
    overflow-y: auto;
    min-width: 250px;
  }
</style>
<pds-dropdown-menu class="scrollable-menu">
  <pds-button slot="trigger">Options</pds-button>
  <pds-dropdown-menu-item>Item 1</pds-dropdown-menu-item>
  <pds-dropdown-menu-item>Item 2</pds-dropdown-menu-item>
  <pds-dropdown-menu-item>Item 3</pds-dropdown-menu-item>
  <pds-dropdown-menu-item>Item 4</pds-dropdown-menu-item>
  <pds-dropdown-menu-item>Item 5</pds-dropdown-menu-item>
  <pds-dropdown-menu-item>Item 6</pds-dropdown-menu-item>
  <pds-dropdown-menu-item>Item 7</pds-dropdown-menu-item>
  <pds-dropdown-menu-item>Item 8</pds-dropdown-menu-item>
  <pds-dropdown-menu-item>Item 9</pds-dropdown-menu-item>
  <pds-dropdown-menu-item>Item 10</pds-dropdown-menu-item>
</pds-dropdown-menu>
`
  }}
>
<style>
{`
  .scrollable-menu::part(menu-panel) {
    max-height: 200px;
    overflow-y: auto;
    min-width: 250px;
  }
`}
</style>
<div style={{ height: '300px', width: '100%', textAlign: 'center'}}>
  <pds-dropdown-menu class="scrollable-menu">
    <pds-button slot="trigger">Options</pds-button>
    <pds-dropdown-menu-item>Item 1</pds-dropdown-menu-item>
    <pds-dropdown-menu-item>Item 2</pds-dropdown-menu-item>
    <pds-dropdown-menu-item>Item 3</pds-dropdown-menu-item>
    <pds-dropdown-menu-item>Item 4</pds-dropdown-menu-item>
    <pds-dropdown-menu-item>Item 5</pds-dropdown-menu-item>
    <pds-dropdown-menu-item>Item 6</pds-dropdown-menu-item>
    <pds-dropdown-menu-item>Item 7</pds-dropdown-menu-item>
    <pds-dropdown-menu-item>Item 8</pds-dropdown-menu-item>
    <pds-dropdown-menu-item>Item 9</pds-dropdown-menu-item>
    <pds-dropdown-menu-item>Item 10</pds-dropdown-menu-item>
  </pds-dropdown-menu>
</div>
</DocCanvas>

## Playground

<Canvas of={stories.Default} />

<Controls of={stories.Default} />
