
import { Meta, Canvas, ArgTypes } from '@storybook/blocks';

<Meta title="Foundations/Layout"/>

# Layout
The Layout system is driven by `pds-layout-box` and `pds-layout-row`. 

## `pds-layout-box`

The `pds-layout-box` serves 2 main purposes:
1. A fully customizable container for your content that allows customization of border, padding, background color, etc.
2. A a grid column

In order to use the `pds-layout-box` as a grid column, it **MUST**:
- be a direct child of a `pds-layout-row`
- have a `size` property set.

## `pds-layout-row`
The `pds-layout-row` component is designed to create horizontal rows that contain a set of columns that are capable of altering sizes at different breakpoints. `pds-layout-box`s that don't exist in `pds-layout-row`s will not contain responsive functionality.

## Examples
### Form Edit view
<Canvas mdxSource={`
<pds-layout-box display="block">
  <pds-layout-row col-gap="1rem">
    {/* left side */}
    <pds-layout-box direction="column" size-md="8">
      <pds-layout-box class="pds-spacing-bottom-md" bordered direction="column" padding="md" border-radius="lg">
        <h3>Episode Details</h3>
        <pds-input class="pds-spacing-bottom-md" component-id="episode-details" label="Episode title" type="text" value="Ep 1"></pds-input>
        {/* TODO - add select */}
        <pds-button class="pds-spacing-bottom-md" variant="secondary" icon="calendar-schedule">Create Season (optional)</pds-button>
        <label>Media</label>
        <p>File upload component</p>
        <label>Show notes</label>
        <p>Text editor component</p>
        <pds-checkbox component-id="episode-explicit" label="Episode contains explicit content" />
      </pds-layout-box>

      <pds-layout-box bordered direction="column" padding="md" border-radius="lg">
        <h3>Transcription</h3>
        <p>Add an episode transcript your members can access from the episode page.
The maximum file size for a transcript is 2 MB. Supported file format: txt</p>
        <pds-button variant="secondary" icon="upload">Upload</pds-button>
      </pds-layout-box>
    </pds-layout-box>
    
    {/* right side */}
    <pds-layout-box direction="column" size-md="4">
      {/* box 1 */}
      <pds-layout-box class="pds-spacing-bottom-md" bordered direction="column" flex="none" padding="md" border-radius="lg">
        <h3>Publish Settings</h3>
        {/* TODO: revisit This
        - Currently this box has flex props which cause the chip to stretch full width
        - arfh */}
        <pds-chip label="Neutral" sentiment="neutral" />
        <pds-box>
          <pds-chip label="Neutral" sentiment="neutral" />
        </pds-box>
        <p>Publish date</p>
        <p>Not Set</p>
        <pds-button variant="secondary" icon="calendar-schedule">Schedule episode</pds-button>
      </pds-layout-box>
      {/* box 2 */}
      <pds-layout-box class="pds-spacing-bottom-md" bordered display="block" flex="none" padding="md" border-radius="lg">
        <h3>Publish Settings</h3>
        <pds-chip label="Neutral" sentiment="neutral" />
        <pds-box>
          <pds-chip label="Neutral" sentiment="neutral" />
        </pds-box>
        <p>Publish date</p>
        <p>Not Set</p>
        <pds-button variant="secondary" icon="calendar-schedule">Schedule episode</pds-button>
      </pds-layout-box>
      <pds-layout-box bordered direction="column" flex="none" padding="md" border-radius="lg">
        <h3>Episode Thumbnail</h3>
        <p>File upload component</p>
      </pds-layout-box>
    </pds-layout-box>
  </pds-layout-row>
</pds-layout-box>
`}>
<pds-layout-box display="block">
  <pds-layout-row col-gap="1rem">
    {/* left side */}
    <pds-layout-box direction="column" size-md="8">
      <pds-layout-box class="pds-spacing-bottom-md" bordered direction="column" padding="md" border-radius="lg">
        <h3>Episode Details</h3>
        <pds-input class="pds-spacing-bottom-md" component-id="episode-details" label="Episode title" type="text" value="Ep 1"></pds-input>
        {/* TODO - add select */}
        <pds-button class="pds-spacing-bottom-md" variant="secondary" icon="calendar-schedule">Create Season (optional)</pds-button>
        <label>Media</label>
        <p>File upload component</p>
        <label>Show notes</label>
        <p>Text editor component</p>
        <pds-checkbox component-id="episode-explicit" label="Episode contains explicit content" />
      </pds-layout-box>

      <pds-layout-box bordered direction="column" padding="md" border-radius="lg">
        <h3>Transcription</h3>
        <p>Add an episode transcript your members can access from the episode page.
The maximum file size for a transcript is 2 MB. Supported file format: txt</p>
        <pds-button variant="secondary" icon="upload">Upload</pds-button>
      </pds-layout-box>
    </pds-layout-box>
    
    {/* right side */}
    <pds-layout-box direction="column" size-md="4">
      {/* box 1 */}
      <pds-layout-box class="pds-spacing-bottom-md" bordered direction="column" flex="none" padding="md" border-radius="lg">
        <h3>Publish Settings</h3>
        {/* TODO: revisit This
        - Currently this box has flex props which cause the chip to stretch full width
        - arfh */}
        <pds-chip label="Neutral" sentiment="neutral" />
        <pds-box>
          <pds-chip label="Neutral" sentiment="neutral" />
        </pds-box>
        <p>Publish date</p>
        <p>Not Set</p>
        <pds-button variant="secondary" icon="calendar-schedule">Schedule episode</pds-button>
      </pds-layout-box>
      {/* box 2 */}
      <pds-layout-box class="pds-spacing-bottom-md" bordered display="block" flex="none" padding="md" border-radius="lg">
        <h3>Publish Settings</h3>
        <pds-chip label="Neutral" sentiment="neutral" />
        <pds-box>
          <pds-chip label="Neutral" sentiment="neutral" />
        </pds-box>
        <p>Publish date</p>
        <p>Not Set</p>
        <pds-button variant="secondary" icon="calendar-schedule">Schedule episode</pds-button>
      </pds-layout-box>
      <pds-layout-box bordered direction="column" flex="none" padding="md" border-radius="lg">
        <h3>Episode Thumbnail</h3>
        <p>File upload component</p>
      </pds-layout-box>
    </pds-layout-box>
  </pds-layout-row>
</pds-layout-box>
</Canvas>

### Example 1
<Canvas mdxSource={`
<pds-layout-box 
  background-color="#DDF8F0"
  border-radius="lg"
  display="flex"
  padding="md"
>
  <pds-layout-row col-gap="1rem">
    <pds-layout-box align-items="center" justify-content="center">
      <img src="../src/stories/assets/offers.png" />
    </pds-layout-box>
    <pds-layout-box size-sm="9">
      <pds-layout-box direction="column">
        <h3>Accept Kajabi Payments on all your Offers!</h3>
        <p>Convert credit card payments and enable Apple Pay, Google Pay, and Buy Now, Pay Later options with one-click.</p>
        <pds-layout-box gap="sm">
          <pds-button>Primary</pds-button>
          <pds-button variant="secondary">Secondary</pds-button>
        </pds-layout-box>
      </pds-layout-box>
    </pds-layout-box>
  </pds-layout-row>
</pds-layout-box>
`}>
<pds-layout-box 
  background-color="#DDF8F0"
  border-radius="lg"
  display="flex"
  padding="md"
>
  <pds-layout-row col-gap="1rem">
    <pds-layout-box align-items="center" justify-content="center" size-sm="3">
      <img src="../src/stories/assets/offers.png" />
    </pds-layout-box>
    <pds-layout-box size-sm="9">
      <pds-layout-box direction="column">
        <h3>Accept Kajabi Payments on all your Offers!</h3>
        <p>Convert credit card payments and enable Apple Pay, Google Pay, and Buy Now, Pay Later options with one-click.</p>
        <pds-layout-box gap="sm">
          <pds-button>Primary</pds-button>
          <pds-button variant="secondary">Secondary</pds-button>
        </pds-layout-box>
      </pds-layout-box>
    </pds-layout-box>
  </pds-layout-row>
</pds-layout-box>
</Canvas>

### Example 2

<Canvas mdxSource={`
<pds-layout-box display="block">
  <pds-layout-row col-gap="24px">
    <pds-layout-box size-md="4">
      <pds-layout-box
        bordered="true" 
        border-radius="lg"
        direction="column"
        padding="sm"
      >
        <h3>Transactions</h3>
        <pds-layout-box gap="sm" justify-content="space-between">
          <pds-layout-box direction="column">
            <span>0</span>
            <span>Successful transactions</span>
          </pds-layout-box>
          <pds-layout-box auto="true" align-items="center">
            <pds-icon name="caret-right"></pds-icon>
          </pds-layout-box>
        </pds-layout-box>
      </pds-layout-box>
    </pds-layout-box>
    <pds-layout-box size-md="4">
      <pds-layout-box
        bordered="true" 
        border-radius="lg"
        direction="column"
        padding="sm"
      >
        <h3>Transactions</h3>
        <pds-layout-box gap="sm" justify-content="space-between">
          <pds-layout-box direction="column">
            <span>0</span>
            <span>Successful transactions</span>
          </pds-layout-box>
          <pds-layout-box auto="true" align-items="center">
            <pds-icon name="caret-right"></pds-icon>
          </pds-layout-box>
        </pds-layout-box>
      </pds-layout-box>
    </pds-layout-box>
    <pds-layout-box size-md="4">
      <pds-layout-box
        bordered="true" 
        border-radius="lg"
        direction="column"
        padding="sm"
      >
        <h3>Transactions</h3>
        <pds-layout-box gap="sm" justify-content="space-between">
          <pds-layout-box direction="column">
            <span>0</span>
            <span>Successful transactions</span>
          </pds-layout-box>
          <pds-layout-box auto="true" align-items="center">
            <pds-icon name="caret-right"></pds-icon>
          </pds-layout-box>
        </pds-layout-box>
      </pds-layout-box>
    </pds-layout-box>
  </pds-layout-row>
</pds-layout-box>
`}>
<pds-layout-box display="block">
  <pds-layout-row col-gap="24px">
    <pds-layout-box size-md="4">
      <pds-layout-box
        bordered="true" 
        border-radius="lg"
        direction="column"
        padding="sm"
      >
        <h3>Transactions</h3>
        <pds-layout-box gap="sm" justify-content="space-between">
          <pds-layout-box direction="column">
            <span>0</span>
            <span>Successful transactions</span>
          </pds-layout-box>
          <pds-layout-box auto="true" align-items="center">
            <pds-icon name="caret-right"></pds-icon>
          </pds-layout-box>
        </pds-layout-box>
      </pds-layout-box>
    </pds-layout-box>
    <pds-layout-box size-md="4">
      <pds-layout-box
        bordered="true" 
        border-radius="lg"
        direction="column"
        padding="sm"
      >
        <h3>Transactions</h3>
        <pds-layout-box gap="sm" justify-content="space-between">
          <pds-layout-box direction="column">
            <span>0</span>
            <span>Successful transactions</span>
          </pds-layout-box>
          <pds-layout-box auto="true" align-items="center">
            <pds-icon name="caret-right"></pds-icon>
          </pds-layout-box>
        </pds-layout-box>
      </pds-layout-box>
    </pds-layout-box>
    <pds-layout-box size-md="4">
      <pds-layout-box
        bordered="true" 
        border-radius="lg"
        direction="column"
        padding="sm"
      >
        <h3>Transactions</h3>
        <pds-layout-box gap="sm" justify-content="space-between">
          <pds-layout-box direction="column">
            <span>0</span>
            <span>Successful transactions</span>
          </pds-layout-box>
          <pds-layout-box auto="true" align-items="center">
            <pds-icon name="caret-right"></pds-icon>
          </pds-layout-box>
        </pds-layout-box>
      </pds-layout-box>
    </pds-layout-box>
  </pds-layout-row>
</pds-layout-box>
</Canvas>

### Creating a 12-Column Grid System
By combining the `pds-layout-box` and `pds-layout-row` components, you can easily create a 12-column grid system. Here's an example of how to structure your layout:

<Canvas mdxSource={`
<pds-layout-box display="block">
  <pds-layout-row>
    <pds-layout-box>
      Content for column 1
    </pds-layout-box>
    <pds-layout-box>
      Content for column 2
    </pds-layout-box>
  </pds-layout-row>
</pds-layout-box>
`}>
<pds-layout-box display="block">
  <pds-layout-row>
    <pds-layout-box>
      Content for column 1
    </pds-layout-box>
    <pds-layout-box>
      Content for column 2
    </pds-layout-box>
  </pds-layout-row>
</pds-layout-box>
</Canvas>

By default, adding `pds-layout-row`s with no `size` property will create equal width columns. 
This creates a two-column layout, and you can customize the `size` and arrangement of the columns to achieve the desired layout for your application. The `size` property affects the width of the column across all viewports.
<Canvas mdxSource={`
<pds-layout-box display="block">
  <pds-layout-row>
    <pds-layout-box size="4">
      Content for column 1
    </pds-layout-box>
    <pds-layout-box size="8">
      Content for column 2
    </pds-layout-box>
  </pds-layout-row>
</pds-layout-box>
`}>
<pds-layout-box display="block">
  <pds-layout-row>
    <pds-layout-box size="4">
      Content for column 1
    </pds-layout-box>
    <pds-layout-box size="8">
      Content for column 2
    </pds-layout-box>
  </pds-layout-row>
</pds-layout-box>
</Canvas>

## Responsive Design
Using the size modifiers such as `-xs`, `-md`, etc, enable responsive behavior for you `pds-layout-box`. The layout components are designed to be responsive, allowing you to create layouts that adapt to different screen sizes. Take advantage of properties like `size-xs`, `offset-sm`, etc., to customize the layout for specific breakpoints. Be sure to optimize your layout for mobile devices, as well as larger screens.
<Canvas mdxSource={`
<pds-layout-box display="block">
  <pds-layout-row>
    <pds-layout-box size-md="6" size-lg="4" size-xl="3">Item 1</pds-layout-box>
    <pds-layout-box direction="column" size-md="6" size-lg="4" size-xl="3">
      <p>Content 1</p>
      <p>Content 2</p>
    </pds-layout-box>
    <pds-layout-box size-md="6" size-lg="4" size-xl="3">Item 3</pds-layout-box>
    <pds-layout-box size-md="6" size-lg="4" size-xl="3">Item 4</pds-layout-box>
  </pds-layout-row>
</pds-layout-box>
`}>
  <pds-layout-box display="block">
    <pds-layout-row
      component-id="${args.componentId}" 
    >
      <pds-layout-box size-md="6" size-lg="4" size-xl="3">Item 1</pds-layout-box>
      <pds-layout-box size-md="6" size-lg="4" size-xl="3">Item 2</pds-layout-box>
      <pds-layout-box size-md="6" size-lg="4" size-xl="3">Item 3</pds-layout-box>
    </pds-layout-row>
  </pds-layout-box>
</Canvas>


### Visible / Hidden Columns
`size` and `offset` can be used to hide or show columns at different breakpoints. Values from 1 - 12 show the column, 0 hides the column.
<Canvas mdxSource={`
<pds-layout-box display="block">
  <pds-layout-row>
    <pds-layout-box size-xs="0" size-sm="0" size-lg="6">Larger screen content</pds-layout-box>
    <pds-layout-box size-md="6" size-lg="0">Small screen content</pds-layout-box>
  </pds-layout-row>
</pds-layout-box>
`}>
  <pds-layout-box display="block">
    <pds-layout-row>
      <pds-layout-box size-xs="0" size-sm="0" size-lg="12">Larger screen content</pds-layout-box>
      <pds-layout-box size-md="12" size-lg="0">Small screen content</pds-layout-box>
    </pds-layout-row>
  </pds-layout-box>
</Canvas>

### Offsetting Columns
Use the `offset` property to offset columns to the right. The `offset` property accepts values from 1 - 11. For example, `offset="1"` will offset the column by one column width. Adding size modifiers such as `offset-md="1"` will offset the column by one column width on medium screens and larger.
<Canvas mdxSource={`
<pds-layout-box direction="column"  fit>
  <pds-layout-row>
    <pds-layout-box size="4">Item 1</pds-layout-box>
    <pds-layout-box offset="4" size="4">Item 2</pds-layout-box>
  </pds-layout-row>
  <pds-layout-row>
    <pds-layout-box size-md="4">Item 1</pds-layout-box>
    <pds-layout-box offset-md="4" size-md="4">Item 2</pds-layout-box>
  </pds-layout-row>
  <pds-layout-row>
    <pds-layout-box offset="3" offset-xs="2" size="6" size-xs="8">Item 1</pds-layout-box>
  </pds-layout-row>
</pds-layout-box>
`}>
<pds-layout-box direction="column" fit>
  <pds-layout-row
    component-id="${args.componentId}" 
  >
    <pds-layout-box size="4">Item 1</pds-layout-box>
    <pds-layout-box offset="4" size="4">Item 2</pds-layout-box>
  </pds-layout-row>
  <pds-layout-row
    component-id="${args.componentId}" 
  >
    <pds-layout-box size-md="4">Item 1</pds-layout-box>
    <pds-layout-box offset-md="4" size-md="4">Item 2</pds-layout-box>
  </pds-layout-row>
  <pds-layout-row
    component-id="${args.componentId}" 
  >
    <pds-layout-box offset="3" offset-xs="2" size="6" size-xs="8">Item 1</pds-layout-box>
  </pds-layout-row>
</pds-layout-box>
</Canvas>

### Alignment
Adding either `flex` **`display`** property to the box will initiate alignment values. Use `align-items` to change the vertical alignment of the box. Use `justify-content` to change the horizontal alignment of the box.

<Canvas mdxSource={`
<pds-layout-box display="block">
  <pds-layout-row min-height="100px">
    <pds-layout-box
      align-items="start"
      bordered="true"
      display="flex"
      justify-content="center"
      min-height="200px"
      padding="sm"
    >
      Content 1
    </pds-layout-box>
    <pds-layout-box
      align-items="center"
      bordered="true"
      display="flex"
      justify-content="center"
      padding="sm"
    >
      Content2
    </pds-layout-box>
    <pds-layout-box
      align-items="end"
      bordered="true"
      display="flex"
      justify-content="end"
      padding="sm"
    >
      Content 3
    </pds-layout-box>
  </pds-layout-row>
</pds-layout-box>
`}>
  <pds-layout-box display="block">
    <pds-layout-row min-height="100px">
      <pds-layout-box
        align-items="start"
        bordered="true"
        display="flex"
        justify-content="center"
        min-height="200px"
        padding="sm"
      >
        Content 1
      </pds-layout-box>
      <pds-layout-box
        align-items="center"
        bordered="true"
        display="flex"
        justify-content="center"
        padding="sm"
      >
        Content2
      </pds-layout-box>
      <pds-layout-box
        align-items="end"
        bordered="true"
        display="flex"
        justify-content="end"
        padding="sm"
      >
        Content 3
      </pds-layout-box>
    </pds-layout-row>
  </pds-layout-box>
</Canvas>

Note - using **`min-height`** on the `Box` or the parent `Row` is recommended to ensure the box is vertically centered. Horizontal centering does take affect with no `min-height` present.
<Canvas mdxSource={`
<pds-layout-box display="block">
  <pds-layout-row>
    <pds-layout-box
      align-items="start"
      bordered="true"
      display="flex"
      justify-content="center"
      padding="sm"
    >
      Content 1
    </pds-layout-box>
    <pds-layout-box
      align-items="center"
      bordered="true"
      display="flex"
      justify-content="center"
      padding="sm"
    >
      Content2
    </pds-layout-box>
    <pds-layout-box
      align-items="end"
      bordered="true"
      display="flex"
      justify-content="end"
      padding="sm"
    >
      Content 3
    </pds-layout-box>
  </pds-layout-row>
</pds-layout-box>
`}>
  <pds-layout-box display="block">
    <pds-layout-row>
      <pds-layout-box
        align-items="start"
        bordered="true"
        display="flex"
        justify-content="center"
        padding="sm"
      >
        Content 1
      </pds-layout-box>
      <pds-layout-box
        align-items="center"
        bordered="true"
        display="flex"
        justify-content="center"
        padding="sm"
      >
        Content2
      </pds-layout-box>
      <pds-layout-box
        align-items="end"
        bordered="true"
        display="flex"
        justify-content="end"
        padding="sm"
      >
        Content 3
      </pds-layout-box>
    </pds-layout-row>
  </pds-layout-box>
</Canvas>

## Nested Layouts
You can nest `pds-layout-row` and `pds-layout-box` components to create more complex layouts. 
<Canvas mdxSource={`
<pds-layout-box display="block">
  <pds-layout-row>
    <pds-layout-box display="block" size-md="8">
      <pds-layout-row>
        <pds-layout-box size-xl="6">Column 1 Item 1</pds-layout-box>
        <pds-layout-box size-xl="6">Column 1 Item 2</pds-layout-box>
      </pds-layout-row>
    </pds-layout-box>
    <pds-layout-box
      display="flex"
      size-md="4"
    >
      <pds-layout-box
        display="flex"
        align-items="center"
        justify-content="center"
      >
        Column 2
      </pds-layout-box>
    </pds-layout-box>
  </pds-layout-row>
</pds-layout-box>
`}>
  <pds-layout-box display="block">
    <pds-layout-row>
      <pds-layout-box display="block" size-md="8">
        <pds-layout-row>
          <pds-layout-box size-xl="6">Column 1 Item 1</pds-layout-box>
          <pds-layout-box size-xl="6">Column 1 Item 2</pds-layout-box>
        </pds-layout-row>
      </pds-layout-box>
      <pds-layout-box
        display="flex"
        size-md="4"
      >
        <pds-layout-box
          display="flex"
          align-items="center"
          justify-content="center"
        >
          Column 2
        </pds-layout-box>
      </pds-layout-box>
    </pds-layout-row>
  </pds-layout-box>
</Canvas>

### Gaps / Gutters
When a gap or gutter is needed between the columns, an additional child `pds-layout-box` must be used to ensure correct spacing between the columns and rows
<Canvas mdxSource={`
<pds-layout-row col-gap="16px">
  <pds-layout-box size-sm="4">
    <pds-layout-box 
      border-radius="sm"
      padding="sm"
      shadow="sm"
    >
      Item 1
    </pds-layout-box>
  </pds-layout-box>
  <pds-layout-box size-sm="8">
    <pds-layout-box padding="sm" shadow="sm">
      Item 2
    </pds-layout-box>
  </pds-layout-box>
</pds-layout-row>
`}>
  <pds-layout-row col-gap="16px">
    <pds-layout-box size-sm="4">
      <pds-layout-box 
        border-radius="sm"
        padding="sm"
        shadow="sm"
      >
        Item 1
      </pds-layout-box>
    </pds-layout-box>
    <pds-layout-box size-sm="8">
      <pds-layout-box padding="sm" shadow="sm">
        Item 2
      </pds-layout-box>
    </pds-layout-box>
  </pds-layout-row>
</Canvas>

## Troubleshooting

If you encounter issues with your layout, here are some common problems and their solutions:

### 1. Columns Not Aligning Correctly
  - **Issue:** Columns are not aligning as expected.
  - **Solution:** Double-check the `align-items` and `justify-content` properties on the parent `pds-layout-row` component. Ensure that the sum of the column sizes within the row is equal to or less than 12 for a 12-column grid. Colums sums greater than 12 will wrap the row to the next line.

### 2. Unexpected Spacing
  - **Issue:** Unexpected spacing between columns.
  - **Solution:** Check the `padding` property on the `pds-layout-box` components. Adjust the padding values to achieve the desired spacing between columns.

### 3. **Misalignment on Small Screens**
  - **Issue:** Misalignment of columns on small screens.
  - **Solution:** Use responsive properties like `offset-xs` to adjust column positions on smaller screens. Also, consider testing with a simplified layout or applying different alignment properties for smaller screens.

### 4. **Layout Not Responsive**
  - **Issue:** The layout does not respond as expected on different devices.
  - **Solution:** Review the usage of responsive properties across your layout. Ensure that breakpoints are applied consistently, and test on various devices to identify and address responsiveness issues.

### 5. **Performance Degradation due to Unnecessary Nesting**
  - **Issue:** Noticeable performance degradation, especially on complex layouts.
  - **Solution:** Review the nested `pds-layout-box`s structure and minimize unnecessary nesting by flattening your layout structure where possible. Excessive nesting can cause performance issues, especially on complex layouts.

## Related Components
- [Box](/docs/components-box--docs)
- [Row](/docs/components-row--docs)
