
import { Meta, Canvas, ArgTypes } from '@storybook/blocks';

<Meta title="Foundations/Layout"/>

# Layout
The Layout system consists on using the `Row` and the `Box` component in tandem

## Row
The `pds-row` component is designed to create horizontal rows that contain a set of columns.

## Box
The `pds-layout-box` component serves as a versatile building block for creating individual elements within your layout. You can use the `pds-layout-box` component to create columns, rows, and other layout elements with use of the `size` and `offset` properties or their variants.

### Creating a 12-Column Grid System
By combining the `pds-layout-box` and `pds-row` components, you can easily create a 12-column grid system. Here's an example of how to structure your layout:

<Canvas mdxSource={`
<pds-row>
  <pds-layout-box>
    Content for column 1
  </pds-layout-box>
  <pds-layout-box>
    Content for column 2
  </pds-layout-box>
</pds-row>
`}>
<pds-row>
  <pds-layout-box>
    Content for column 1
  </pds-layout-box>
  <pds-layout-box>
    Content for column 2
  </pds-layout-box>
</pds-row>
</Canvas>

By default, adding `pds-row`s with no `size` property will create equal width columns. 
This creates a two-column layout, and you can customize the `size` and arrangement of the columns to achieve the desired layout for your application. The `size` property affects the width of the column across all viewports.
<Canvas mdxSource={`
<pds-row>
  <pds-layout-box size="4">
    Content for column 1
  </pds-layout-box>
  <pds-layout-box size="8">
    Content for column 2
  </pds-layout-box>
</pds-row>
`}>
<pds-row>
  <pds-layout-box size="4">
    Content for column 1
  </pds-layout-box>
  <pds-layout-box size="8">
    Content for column 2
  </pds-layout-box>
</pds-row>
</Canvas>

## Responsive Design
Using the size modifiers such as `-xs`, `-md`, etc, enable responsive behavior for you `pds-layout-box`. The layout components are designed to be responsive, allowing you to create layouts that adapt to different screen sizes. Take advantage of properties like `size-xs`, `offset-sm`, etc., to customize the layout for specific breakpoints. Be sure to optimize your layout for mobile devices, as well as larger screens.
<Canvas mdxSource={`
<pds-row>
  <pds-layout-box size-md="6" size-lg="4" size-xl="3">Item 1</pds-layout-box>
  <pds-layout-box direction="column" size-md="6" size-lg="4" size-xl="3">
    <p>Content 1</p>
    <p>Content 2</p>
  </pds-layout-box>
  <pds-layout-box size-md="6" size-lg="4" size-xl="3">Item 3</pds-layout-box>
  <pds-layout-box size-md="6" size-lg="4" size-xl="3">Item 4</pds-layout-box>
</pds-row>
`}>
  <pds-row
    component-id="${args.componentId}" 
  >
    <pds-layout-box size-md="6" size-lg="4" size-xl="3">Item 1</pds-layout-box>
    <pds-layout-box size-md="6" size-lg="4" size-xl="3">Item 2</pds-layout-box>
    <pds-layout-box size-md="6" size-lg="4" size-xl="3">Item 3</pds-layout-box>
  </pds-row>
</Canvas>


### Visible / Hidden Columns
`size` and `offset` can be used to hide or show columns at different breakpoints. Values from 1 - 12 show the column, 0 hides the column.
<Canvas mdxSource={`
<pds-row>
  <pds-layout-box size-xs="0" size-sm="0" size-lg="6">Larger screen content</pds-layout-box>
  <pds-layout-box size-md="6" size-lg="0">Small screen content</pds-layout-box>
</pds-row>
`}>
  <pds-row>
    <pds-layout-box size-xs="0" size-sm="0" size-lg="12">Larger screen content</pds-layout-box>
    <pds-layout-box size-md="12" size-lg="0">Small screen content</pds-layout-box>
  </pds-row>
</Canvas>

### Offsetting Columns
Use the `offset` property to offset columns to the right. The `offset` property accepts values from 1 - 11. For example, `offset="1"` will offset the column by one column width. Adding size modifiers such as `offset-md="1"` will offset the column by one column width on medium screens and larger.
<Canvas mdxSource={`
<pds-row>
  <pds-layout-box size="4">Item 1</pds-layout-box>
  <pds-layout-box offset="4" size="4">Item 2</pds-layout-box>
</pds-row>
<pds-row>
  <pds-layout-box size-md="4">Item 1</pds-layout-box>
  <pds-layout-box offset-md="4" size-md="4">Item 2</pds-layout-box>
</pds-row>
<pds-row>
  <pds-layout-box offset="3" offset-xs="2" size="6" size-xs="8">Item 1</pds-layout-box>
</pds-row>
`}>
<>
  <pds-row
    component-id="${args.componentId}" 
  >
    <pds-layout-box size="4">Item 1</pds-layout-box>
    <pds-layout-box offset="4" size="4">Item 2</pds-layout-box>
  </pds-row>
  <pds-row
    component-id="${args.componentId}" 
  >
    <pds-layout-box size-md="4">Item 1</pds-layout-box>
    <pds-layout-box offset-md="4" size-md="4">Item 2</pds-layout-box>
  </pds-row>
  <pds-row
    component-id="${args.componentId}" 
  >
    <pds-layout-box offset="3" offset-xs="2" size="6" size-xs="8">Item 1</pds-layout-box>
  </pds-row>
</>
</Canvas>

### Alignment
Adding either `flex` **`display`** property to the box will initiate alignment values. Use `align-items` to change the vertical alignment of the box. Use `justify-content` to change the horizontal alignment of the box.

<Canvas mdxSource={`
<pds-row min-height="100px">
  <pds-layout-box
    align-items="start"
    bordered="true"
    display="flex"
    justify-content="center"
    min-height="200px"
    padding="sm"
  >
    Content 1
  </pds-layout-box>
  <pds-layout-box
    align-items="center"
    bordered="true"
    display="flex"
    justify-content="center"
    padding="sm"
  >
    Content2
  </pds-layout-box>
  <pds-layout-box
    align-items="end"
    bordered="true"
    display="flex"
    justify-content="end"
    padding="sm"
  >
    Content 3
  </pds-layout-box>
</pds-row>
`}>
  <pds-row min-height="100px">
    <pds-layout-box
      align-items="start"
      bordered="true"
      display="flex"
      justify-content="center"
      min-height="200px"
      padding="sm"
    >
      Content 1
    </pds-layout-box>
    <pds-layout-box
      align-items="center"
      bordered="true"
      display="flex"
      justify-content="center"
      padding="sm"
    >
      Content2
    </pds-layout-box>
    <pds-layout-box
      align-items="end"
      bordered="true"
      display="flex"
      justify-content="end"
      padding="sm"
    >
      Content 3
    </pds-layout-box>
  </pds-row>
</Canvas>

Note - using **`min-height`** on the `Box` or the parent `Row` is recommended to ensure the box is vertically centered. Horizontal centering does take affect with no `min-height` present.
<Canvas mdxSource={`
<pds-row>
  <pds-layout-box
    align-items="start"
    bordered="true"
    display="flex"
    justify-content="center"
    padding="sm"
  >
    Content 1
  </pds-layout-box>
  <pds-layout-box
    align-items="center"
    bordered="true"
    display="flex"
    justify-content="center"
    padding="sm"
  >
    Content2
  </pds-layout-box>
  <pds-layout-box
    align-items="end"
    bordered="true"
    display="flex"
    justify-content="end"
    padding="sm"
  >
    Content 3
  </pds-layout-box>
</pds-row>
`}>
  <pds-row>
    <pds-layout-box
      align-items="start"
      bordered="true"
      display="flex"
      justify-content="center"
      padding="sm"
    >
      Content 1
    </pds-layout-box>
    <pds-layout-box
      align-items="center"
      bordered="true"
      display="flex"
      justify-content="center"
      padding="sm"
    >
      Content2
    </pds-layout-box>
    <pds-layout-box
      align-items="end"
      bordered="true"
      display="flex"
      justify-content="end"
      padding="sm"
    >
      Content 3
    </pds-layout-box>
  </pds-row>
</Canvas>

## Nested Layouts
You can nest `pds-row` and `pds-layout-box` components to create more complex layouts. 
<Canvas mdxSource={`
<pds-row>
  <pds-layout-box size-md="8">
    <pds-row>
      <pds-layout-box size-xl="6">Column 1 Item 1</pds-layout-box>
      <pds-layout-box size-xl="6">Column 1 Item 2</pds-layout-box>
    </pds-row>
  </pds-layout-box>
  <pds-layout-box
    display="flex"
    size-md="4"
  >
    <pds-layout-box
      display="flex"
      align-items="center"
      justify-content="center"
    >
      Column 2
    </pds-layout-box>
  </pds-layout-box>
</pds-row>
`}>
  <pds-row>
    <pds-layout-box size-md="8">
      <pds-row>
        <pds-layout-box size-xl="6">Column 1 Item 1</pds-layout-box>
        <pds-layout-box size-xl="6">Column 1 Item 2</pds-layout-box>
      </pds-row>
    </pds-layout-box>
    <pds-layout-box
      display="flex"
      size-md="4"
    >
      <pds-layout-box
        display="flex"
        align-items="center"
        justify-content="center"
      >
        Column 2
      </pds-layout-box>
    </pds-layout-box>
  </pds-row>
</Canvas>

## Examples

<pds-layout-box 
  background-color="#DDF8F0"
  border-radius="lg"
  display="flex"
  padding="md"
>
  <pds-row col-gap="16px">
    <pds-layout-box align-items="center" justify-content="center">
      <img src="../src/stories/assets/offers.png" />
    </pds-layout-box>
    <pds-layout-box size-md="9">
      <pds-layout-box direction="column">
        <h3>Accept Kajabi Payments on all your Offers!</h3>
        <p>Convert credit card payments and enable Apple Pay, Google Pay, and Buy Now, Pay Later options with one-click.</p>
        <pds-layout-box gap="sm">
          <pds-button>Primary</pds-button>
          <pds-button variant="secondary">Secondary</pds-button>
        </pds-layout-box>
      </pds-layout-box>
    </pds-layout-box>
  </pds-row>
</pds-layout-box>

<pds-row col-gap="24px">
  <pds-layout-box size-md="4">
    <pds-layout-box
      bordered="true" 
      border-radius="lg"
      direction="column"
      padding="sm"
    >
      <h3>Transactions</h3>
      <pds-layout-box gap="sm" justify-content="space-between">
        <pds-layout-box direction="column">
          <span>0</span>
          <span>Successful transactions</span>
        </pds-layout-box>
        <pds-layout-box auto="true" align-items="center">
          <pds-icon name="caret-right"></pds-icon>
        </pds-layout-box>
      </pds-layout-box>
    </pds-layout-box>
  </pds-layout-box>
  <pds-layout-box size-md="4">
    <pds-layout-box
      bordered="true" 
      border-radius="lg"
      direction="column"
      padding="sm"
    >
      <h3>Transactions</h3>
      <pds-layout-box gap="sm" justify-content="space-between">
        <pds-layout-box direction="column">
          <span>0</span>
          <span>Successful transactions</span>
        </pds-layout-box>
        <pds-layout-box auto="true" align-items="center">
          <pds-icon name="caret-right"></pds-icon>
        </pds-layout-box>
      </pds-layout-box>
    </pds-layout-box>
  </pds-layout-box>
  <pds-layout-box size-md="4">
    <pds-layout-box
      bordered="true" 
      border-radius="lg"
      direction="column"
      padding="sm"
    >
      <h3>Transactions</h3>
      <pds-layout-box gap="sm" justify-content="space-between">
        <pds-layout-box direction="column">
          <span>0</span>
          <span>Successful transactions</span>
        </pds-layout-box>
        <pds-layout-box auto="true" align-items="center">
          <pds-icon name="caret-right"></pds-icon>
        </pds-layout-box>
      </pds-layout-box>
    </pds-layout-box>
  </pds-layout-box>
</pds-row>

## Troubleshooting

If you encounter issues with your layout, here are some common problems and their solutions:

### 1. Columns Not Aligning Correctly
  - **Issue:** Columns are not aligning as expected.
  - **Solution:** Double-check the `align-items` and `justify-content` properties on the parent `pds-row` component. Ensure that the sum of the column sizes within the row is equal to or less than 12 for a 12-column grid. Colums sums greater than 12 will wrap the row to the next line.

### 2. Unexpected Spacing
  - **Issue:** Unexpected spacing between columns.
  - **Solution:** Check the `padding` property on the `pds-layout-box` components. Adjust the padding values to achieve the desired spacing between columns.

### 3. **Misalignment on Small Screens**
  - **Issue:** Misalignment of columns on small screens.
  - **Solution:** Use responsive properties like `offset-xs` to adjust column positions on smaller screens. Also, consider testing with a simplified layout or applying different alignment properties for smaller screens.

### 4. **Layout Not Responsive**
  - **Issue:** The layout does not respond as expected on different devices.
  - **Solution:** Review the usage of responsive properties across your layout. Ensure that breakpoints are applied consistently, and test on various devices to identify and address responsiveness issues.

### 5. **Performance Degradation due to Unnecessary Nesting**
  - **Issue:** Noticeable performance degradation, especially on complex layouts.
  - **Solution:** Review the nested `pds-layout-box`s structure and minimize unnecessary nesting by flattening your layout structure where possible. Excessive nesting can cause performance issues, especially on complex layouts.

## Related Components
- [Box](/docs/components-box--docs)
- [Row](/docs/components-row--docs)
